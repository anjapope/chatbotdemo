/* Layout for the chat page (chat.html) */
.chatbot-window { margin-top: 64px; background: var(--surface); border-radius: var(--radius-md); box-shadow: var(--shadow-md); width: 100%; max-width: 800px; height: 90vh; max-height: 700px; display: flex; flex-direction: column; overflow: hidden; }

.header { background: var(--bg-gradient); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
.header h1 { font-size: 24px; font-weight: 600; }

.status { display: flex; align-items: center; gap: 8px; font-size: 14px; }
.status-indicator { width: 8px; height: 8px; border-radius: 50%; background: #4ade80; animation: pulse 2s infinite; }

/* AI preparing status */
.ai-status { display: flex; align-items: center; gap: 8px; color: #334155; font-weight: 600; }
.ai-status .spinner { width: 14px; height: 14px; border: 2px solid rgba(0,0,0,0.1); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
.ai-status.hidden { display: none; }

@keyframes spin { to { transform: rotate(360deg); } }

.config-panel { background: #f8fafc; border-bottom: 1px solid #e2e8f0; padding: 16px; }
.config-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 12px; }
.config-row:last-child { margin-bottom: 0; }
.config-field { display: flex; flex-direction: column; gap: 4px; }
.config-field label { font-size: 12px; font-weight: 500; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
.config-field input, .config-field select, .config-field textarea { padding: 8px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; font-family: inherit; transition: border-color 0.2s; }
.config-field input:focus, .config-field select:focus, .config-field textarea:focus { outline: none; border-color: #667eea; }
.config-field textarea { resize: vertical; min-height: 60px; }

.chat-container { flex: 1; overflow-y: auto; padding: 20px; background: #f8fafc; }
.message { display: flex; margin-bottom: 16px; animation: slideIn 0.3s ease-out; }
@keyframes slideIn { from{ opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
.message.user { justify-content: flex-end; }
.message-content { max-width: 70%; padding: 12px 16px; border-radius: var(--radius-md); line-height: 1.5; font-size: 14px; word-wrap: break-word; white-space: pre-wrap; }
.message.user .message-content { background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); color: white; border-bottom-right-radius: 4px; }
.message.assistant .message-content { background: var(--surface); color: var(--text-strong); border: 1px solid #e2e8f0; border-bottom-left-radius: 4px; }

.input-container { background: white; border-top: 1px solid #e2e8f0; padding: 16px; display: flex; gap: 12px; }
.input-wrapper { flex: 1; position: relative; }
#userInput { width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 24px; font-size: 14px; font-family: inherit; resize: none; transition: border-color 0.2s; max-height: 120px; }
#userInput:focus { outline: none; border-color: var(--primary); }
#sendBtn { padding: 12px 24px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); color: white; border: none; border-radius: 24px; font-size: 14px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; white-space: nowrap; }
#sendBtn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }
#sendBtn:disabled { opacity: 0.5; cursor: not-allowed; }
#sendBtn:active:not(:disabled) { transform: translateY(0); }

.chat-container::-webkit-scrollbar { width: 8px; }
.chat-container::-webkit-scrollbar-track { background: #f1f5f9; }
.chat-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
.chat-container::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

/* Review UI */
.review-bar { margin-top: 8px; display:flex; gap:8px; align-items:center; }
.review-bar .rate-btn { background: transparent; border: 1px solid rgba(0,0,0,0.06); padding:6px 10px; border-radius:8px; cursor:pointer; }
.review-form { display:flex; gap:8px; align-items:flex-start; }
.review-form select { padding:6px; }
.review-form textarea { width:260px; padding:8px; border-radius:8px; border:1px solid #e2e8f0; }
.review-form .submit-review { background: var(--primary); color: #fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }

/* Inline star rating */
.star-rating { display:flex; gap:6px; align-items:center; }
.star-rating .star { background: transparent; border: none; font-size: 18px; cursor: pointer; color: #cbd5e1; }
.star-rating .star:hover, .star-rating .star:focus { color: #f59e0b; transform: scale(1.1); }
.star-rating .star[aria-pressed="true"] { color: #f59e0b; }
.review-extra textarea { width: 100%; margin-top:8px; }

.criteria { display:flex; flex-direction:column; gap:16px; }
.criterion-row { display:flex; gap:18px; align-items:center; padding:8px 0; }
.criterion-label { flex:1; font-size:14px; color:#374151; line-height:1.4; }
.criterion-row .star-rating { flex:0 0 auto; }

/* Toast notification */
.toast { position: fixed; right: 20px; bottom: 30px; background: rgba(17,24,39,0.95); color: #fff; padding: 10px 14px; border-radius: 8px; box-shadow: 0 6px 18px rgba(2,6,23,0.4); font-size: 13px; z-index: 1200; }
.toast.hidden { display: none; }

/* Disabled star look */
.star-rating .star:disabled { opacity: 0.45; cursor: default; transform: none; }

@media (max-width: 640px) {
  .chatbot-window { max-width: 100%; height: 92vh; }
}

/* Suggestion editor styles */
.suggestion-area { margin-top:6px; }
.suggestion-box textarea {
  width: 100%;
  min-height: 140px; /* larger edit box */
  padding: 10px;
  border-radius: 8px; 
  border: 1px solid #e2e8f0;
  resize: vertical;
  font-family: inherit;
  font-size: 14px;
}
.suggest-edit-btn { margin-top:6px; }

.rating-summary { font-size: 13px; color: #475569; }

/* Popout styles: position suggestion-box absolutely below the message on wide screens */
.message { position: relative; }
.suggestion-box {
  position: absolute;
  left: 16px;
  right: 16px;
  top: calc(100% + 8px);
  background: white;
  border: 1px solid #e6eef8;
  box-shadow: 0 8px 24px rgba(2,6,23,0.12);
  padding: 12px;
  z-index: 30;
  border-radius: 8px;
}

@media (max-width: 640px) {
  .suggestion-box { position: static; box-shadow: none; border: none; padding: 0; }
}
